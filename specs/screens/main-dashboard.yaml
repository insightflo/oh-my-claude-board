version: "2.0"

screen:
  name: 메인 대시보드
  route: oh-my-claude-board watch
  layout: split-horizontal
  auth: false

data_requirements:
  - resource: tasks
    needs: [phases, phase_id, phase_name, phase_status, phase_progress, task_id, task_name, task_status, task_agent, task_blocked_by]

  - resource: hook_events
    needs: [event_type, timestamp, agent_id, task_id, error_message]

  - resource: session
    needs: [total_tasks, completed_tasks, failed_tasks, overall_progress, uptime]

components:
  - id: left_panel
    type: container
    position: main-left
    function: 대시보드 영역 (간트차트 + 상세 패널 수직 분할)
    events:
      - on: focus
        do: 좌측 패널 활성화, 테두리 하이라이트

  - id: right_panel
    type: container
    position: main-right
    function: Claude Code 출력 영역
    events:
      - on: focus
        do: 우측 패널 활성화, 테두리 하이라이트

connections:
  navigations:
    - from: left_panel
      to: S-02 간트차트
    - from: left_panel
      to: S-03 태스크 상세
    - from: right_panel
      to: S-05 Claude Code 출력

  shared_components:
    - statusbar
    - help_overlay

tests:
  - name: 초기 렌더링
    when: oh-my-claude-board watch 실행
    then:
      - 좌측에 간트차트 + 상세 패널 표시
      - 우측에 Claude Code 출력 영역 표시
      - 하단에 상태바 표시

  - name: 패널 포커스 전환
    when: Tab 키 입력
    then:
      - 좌/우 패널 포커스 토글
      - 활성 패널 테두리 White, 비활성 DarkGray

  - name: 앱 종료
    when: q 키 입력
    then:
      - 터미널 원래 상태 복원
      - 프로세스 종료

  - name: 도움말 오버레이
    when: ? 키 입력
    then:
      - 키바인딩 목록 오버레이 표시
