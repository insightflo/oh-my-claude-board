# Design System (TUI 디자인 시스템)

> 터미널 환경에 최적화된 TUI 디자인 시스템입니다.
> 웹/앱 UI 대신 256-color 터미널 컬러와 Box Drawing 문자를 활용합니다.

---

## MVP 캡슐

| # | 항목 | 내용 |
|---|------|------|
| 1 | 목표 | Claude Code 오케스트레이션 진행 상황을 터미널에서 실시간 시각화 |
| 2 | 페르소나 | Claude Code 헤비 유저 |
| 3 | 핵심 기능 | FEAT-1: Watch 모드, FEAT-2: 간트차트, FEAT-3: 에러 AI 분석 |
| 4 | 성공 지표 (노스스타) | GitHub Stars 100+ |
| 5 | 입력 지표 | 주간 다운로드 수 |
| 6 | 비기능 요구 | 렌더링 60fps |
| 7 | Out-of-scope | 웹 UI, 이미지 렌더링 |
| 8 | Top 리스크 | Rust 개발 속도 |
| 9 | 완화/실험 | 위젯 프로토타입 먼저 구현 |
| 10 | 다음 단계 | Ratatui 위젯 스타일링 |

---

## 1. 디자인 철학

### 1.1 핵심 가치

| 가치 | 설명 | 구현 방법 |
|------|------|----------|
| 정보 밀도 | 한 화면에 최대한 많은 정보를 명확하게 | 간트차트 + 상세 패널 + 상태바 동시 표시 |
| 상태 명확성 | 각 태스크의 상태를 즉시 인식 가능 | 색상 코딩 + 아이콘(유니코드 심볼) |
| 개발자 친화적 | vim 키바인딩, 터미널 네이티브 | j/k 내비게이션, 깔끔한 모노스페이스 |

### 1.2 참고 서비스 (무드보드)

| 서비스 | 참고할 점 | 참고하지 않을 점 |
|--------|----------|-----------------|
| lazygit | 패널 분할, 키바인딩, 색상 활용 | 복잡한 다중 패널 |
| btop/htop | 실시간 모니터링 UI, 프로그레스바 | 과도한 장식 |
| GitHub Actions | 단계별 진행 상태 시각화 | 웹 전용 요소 |
| cokacdir-main | 터미널 분할 패턴 | - |

---

## 2. 컬러 팔레트 (터미널 256-color)

### 2.1 상태 컬러 (핵심!)

| 상태 | 컬러 | ANSI 코드 | 심볼 | 사용처 |
|------|------|-----------|------|--------|
| **Completed** | Green | `Color::Green` | `✔` | 완료된 Phase/Task |
| **InProgress** | Cyan | `Color::Cyan` | `◀` or `▶` | 현재 실행 중 |
| **Pending** | DarkGray | `Color::DarkGray` | `○` | 대기 중 |
| **Failed** | Red | `Color::Red` | `✘` | 에러 발생 |
| **Blocked** | Yellow | `Color::Yellow` | `⊘` | 의존성 대기 |

### 2.2 UI 영역 컬러

| 역할 | 컬러 | ANSI 코드 | 사용처 |
|------|------|-----------|--------|
| **패널 테두리** | White | `Color::White` | 활성 패널 테두리 |
| **비활성 테두리** | DarkGray | `Color::DarkGray` | 비활성 패널 테두리 |
| **배경** | Reset (터미널 기본) | `Color::Reset` | 전체 배경 |
| **텍스트 (기본)** | White | `Color::White` | 기본 텍스트 |
| **텍스트 (보조)** | Gray | `Color::Gray` | 보조 정보, 타임스탬프 |
| **하이라이트** | Black on Cyan | `bg: Cyan, fg: Black` | 선택된 행 |
| **프로그레스바 채움** | Green | `Color::Green` | 완료 구간 |
| **프로그레스바 빈칸** | DarkGray | `Color::DarkGray` | 미완료 구간 |

### 2.3 다크/라이트 모드

터미널 앱은 사용자의 터미널 배경색에 자동 적응합니다.
- ANSI 기본 컬러를 사용하여 다크/라이트 터미널 모두 호환
- 하드코딩 RGB 대신 시맨틱 컬러 (Green, Red, Cyan 등) 사용

---

## 3. 타이포그래피 (터미널)

### 3.1 폰트

터미널 폰트는 사용자 설정을 따릅니다. 추천 폰트:

| 폰트 | 특징 |
|------|------|
| JetBrains Mono | Nerd Font 호환, 리간처 지원 |
| Fira Code | 리간처, 유니코드 심볼 풍부 |
| Hack | 깔끔한 고정폭, Nerd Font 호환 |

### 3.2 텍스트 스타일

| 스타일 | 용도 | Ratatui Style |
|--------|------|---------------|
| Bold | Phase 이름, 섹션 제목 | `Style::default().bold()` |
| Normal | 태스크 이름, 일반 텍스트 | `Style::default()` |
| Dim | 타임스탬프, 보조 정보 | `Style::default().dim()` |
| Italic | 에이전트 이름 | `Style::default().italic()` |
| Underline | 사용하지 않음 | - |

---

## 4. 레이아웃 시스템

### 4.1 메인 레이아웃

```
┌─ Dashboard (50%) ──────────────┐┌─ Claude Code (50%) ────────────┐
│                                ││                                │
│  ┌─ Gantt Chart (70%) ───────┐ ││                                │
│  │                           │ ││                                │
│  │  ▼ Phase 1: 100% ✔       │ ││    Claude Code stdout/stderr  │
│  │  ▼ Phase 2: 40%  ◀       │ ││                                │
│  │    ├ Task 2.1 ✔           │ ││                                │
│  │    ├ Task 2.2 30% ◀      │ ││                                │
│  │    └ Task 2.3 대기 ⊘     │ ││                                │
│  │  ▶ Phase 3: 0%           │ ││                                │
│  │                           │ ││                                │
│  └───────────────────────────┘ ││                                │
│  ┌─ Detail Panel (30%) ─────┐ ││                                │
│  │  Task 2.2 상세            │ ││                                │
│  │  에이전트: backend-spec   │ ││                                │
│  │  시작: 14:23:05           │ ││                                │
│  │  상태: 진행 중 30%        │ ││                                │
│  └───────────────────────────┘ ││                                │
├─ Status Bar ───────────────────┤├────────────────────────────────┤
│ [67%] 8/12 tasks | 1 error     ││ oh-my-claude-board v0.1.0 | ?:help   │
└────────────────────────────────┘└────────────────────────────────┘
```

### 4.2 분할 비율

| 영역 | 비율 | 최소 크기 | 조절 가능 |
|------|------|----------|----------|
| 좌 (Dashboard) : 우 (Claude) | 50:50 (기본) | 40:30 칼럼 | `--split` 옵션 |
| 간트차트 : 상세 패널 | 70:30 (기본) | 10행 : 5행 | 동적 조절 |
| 상태바 | 1행 고정 | 1행 | 고정 |

### 4.3 반응형 (터미널 크기)

| 터미널 크기 | 레이아웃 변화 |
|------------|-------------|
| >= 120 x 40 | 풀 레이아웃 (위 그림) |
| 80-119 x 30-39 | 상세 패널 축소 (3행) |
| < 80 x 30 | 경고 메시지 + 단일 패널 모드 |

---

## 5. 핵심 위젯

### 5.1 간트차트 위젯

```
 ▼ Phase 1: 기반 설정          100% ████████████████████ ✔
   ├─ T1.1 프로젝트 초기화     100% ████████████████████ ✔
   └─ T1.2 DB 스키마 설계      100% ████████████████████ ✔
 ▼ Phase 2: 핵심 기능           40% ████████░░░░░░░░░░░░ ◀
   ├─ T2.1 API 엔드포인트      100% ████████████████████ ✔
   ├─ T2.2 프론트엔드 컴포넌트  30% ██████░░░░░░░░░░░░░░ ◀
   └─ T2.3 통합 테스트           0% ░░░░░░░░░░░░░░░░░░░░ ⊘
 ▶ Phase 3: 배포                 0% ░░░░░░░░░░░░░░░░░░░░ ○
```

**구성 요소:**
- `▼/▶`: 접기/펼치기 토글 (Space 키)
- 트리 커넥터: `├─` / `└─` (Box Drawing 문자)
- 프로그레스바: `████░░░░` (블록 문자)
- 상태 심볼: `✔` / `◀` / `○` / `✘` / `⊘`
- 하이라이트: 선택된 행에 Cyan 배경

### 5.2 태스크 상세 패널

```
┌─ Task Detail ──────────────────────────────┐
│ T2.2 프론트엔드 컴포넌트                    │
│                                             │
│ 에이전트: frontend-specialist               │
│ 시작:    14:23:05                           │
│ 경과:    00:12:34                           │
│ 상태:    InProgress (30%)                   │
│                                             │
│ ── 최근 로그 ──                             │
│ 14:23:05 [INFO] 에이전트 시작               │
│ 14:25:12 [INFO] Read: src/App.tsx           │
│ 14:28:45 [INFO] Write: src/Login.tsx        │
└─────────────────────────────────────────────┘
```

### 5.3 에러 상세 패널 (에러 발생 시)

```
┌─ Task Detail (ERROR) ──────────────────────┐
│ T2.2 프론트엔드 컴포넌트           ✘ FAILED │
│                                             │
│ 에이전트: frontend-specialist               │
│ 시작:    14:23:05                           │
│ 실패:    14:35:22                           │
│                                             │
│ ── 에러 ──                                  │
│ TypeError: Cannot read property 'id'        │
│                                             │
│ ── AI 분석 ──                               │
│ 원인: user 객체가 undefined인 상태에서      │
│       속성 접근 시도                         │
│ 제안: null check 또는 optional chaining 추가│
│                                             │
│ [r] 재시도  [Enter] 로그 전체 보기          │
└─────────────────────────────────────────────┘
```

### 5.4 상태바

```
┌─────────────────────────────────────────────────────────────────┐
│ [67%] 8/12 tasks | ✔6 ◀2 ✘1 ⊘3 | uptime: 00:45:12 | ?:help   │
└─────────────────────────────────────────────────────────────────┘
```

**구성 요소:**
- 전체 진행률 퍼센트
- 태스크 상태 요약 (완료/진행/실패/대기)
- 세션 경과 시간
- 도움말 단축키 힌트

---

## 6. 유니코드 심볼 라이브러리

| 심볼 | 용도 | Unicode |
|------|------|---------|
| `✔` | 완료 | U+2714 |
| `✘` | 실패 | U+2718 |
| `◀` | 현재 진행 중 | U+25C0 |
| `○` | 대기 | U+25CB |
| `⊘` | 차단됨 | U+2298 |
| `▼` | 펼침 | U+25BC |
| `▶` | 접힘 | U+25B6 |
| `├` | 트리 분기 | U+251C |
| `└` | 트리 끝 | U+2514 |
| `─` | 트리 가로선 | U+2500 |
| `█` | 프로그레스 채움 | U+2588 |
| `░` | 프로그레스 빈칸 | U+2591 |

---

## 7. 접근성 체크리스트

### 7.1 필수 (MVP)

- [ ] **색상 + 심볼 병행**: 색맹 사용자를 위해 상태를 색상만이 아닌 심볼(✔/✘/◀/○)로도 표시
- [ ] **키보드 전체 탐색**: 마우스 없이 모든 기능 접근 가능
- [ ] **최소 터미널 크기 대응**: 80x24에서도 핵심 정보 표시
- [ ] **`NO_COLOR` 환경변수 지원**: 색상 비활성화 모드
- [ ] **스크린 리더 고려**: 상태 변경 시 텍스트 알림 (Bell 문자)

### 7.2 권장 (v2)

- [ ] 커스텀 컬러 테마 설정 파일
- [ ] 고대비 모드
- [ ] Unicode 심볼 → ASCII 폴백 옵션

---

## Decision Log

| # | 결정 | 근거 |
|---|------|------|
| D1 | ANSI 시맨틱 컬러 사용 | 다크/라이트 터미널 자동 호환 |
| D2 | 유니코드 심볼 + 색상 병행 | 색맹 접근성 + 시각적 명확성 |
| D3 | vim 스타일 키바인딩 | 타겟 사용자(개발자) 습관 |
| D4 | 50:50 기본 분할 | 대시보드와 Claude Code 동일 중요도 |
| D5 | NO_COLOR 지원 | 환경변수 표준 준수 |
